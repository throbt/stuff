/*
 * mnvc javascript framework, written by thRobt(robthot@gmail.com)
 * licensed under the terms of WFTPL (http://en.wikipedia.org/wiki/WTFPL)
 */
var DomBuilder=(function(){var b={};function d(f,j){var k=j||document.body,g=this,l=document.createElement(f.type);for(var h in f){switch(h){case"id":$(l).attr("id",f[h]);break;case"cls":$(l).addClass(f[h]);break;case"style":$(l).attr("style",f[h]);break;case"iType":$(l).attr("type",f[h]);break;case"arr":break;case"html":break;case"cmd":break;case"type":break;default:$(l).attr(h,f[h]);break}}k.appendChild(l);if(f.arr&&f.arr.length!==0){for(var e in f.arr){g.create(f.arr[e],l)}}if(f.html){$(l).html(f.html)}if(f.cmd){$(l).bind(f.cmd[0],f.cmd[1])}return l}function a(h,e){var f=this,j,k=$(e)[0];for(var g in h.childNodes){j=h.childNodes[g];if(j==k){h.removeChild(j);for(var l in f.cache){if(f.cache[l]==k){f.cache[l]=null;delete f.cache[l];return}}}}}function c(j,h,m,f,k){k=k||10;var e=this,l=j;if(typeof DomBuilder.getAttrib=="undefined"){DomBuilder.getAttrib=function(i,n){if(typeof n!="undefined"&&typeof i!="undefined"){return $(i)[0].attr(n)}return null}}if(!h){return j.parentNode}for(var g=0;g<k;g++){if(l.tagName!="HTML"){if(typeof m=="undefined"&&h==l.tagName){return l}else{if(DomBuilder.getAttrib(l,m)!==null){if(DomBuilder.getAttrib(l,m)==f){return l}}}}else{return null}l=l.parentNode}return null}return{cache:b,create:d,remove:a,getParent:c}})();var Stuff=(function(){var a=function(b){var c=[],e;for(var d=b.length-1,f=0;d>=f;--d){e=b[d];if($.inArray(e,c)==-1&&e.match(/[a-zA-Z0-9]/)){c.unshift(e)}}return c};return{arrayUnique:a}})();var Globals=(function(){function b(c,d){var c=c||0,d=d||0;if(c!==0&&d!==0){window[c]=d}}function a(c){var c=c||0;if(window[c]){return window[c]}}return{add:b,read:a}})();var Dispatcher=(function(){var c={};function a(d,f,e){c[d]=c[d]||[];c[d].push({fn:f,scope:e})}function b(d){if(!c[d]){return}for(var f=0;f<c[d].length;++f){var e=c[d][f];e.fn.apply(e.scope||this,Array.prototype.slice.call(arguments,1))}}return{on:a,fireEvent:b}})();var Effect=(function(){function a(b){if(b<(1/2.75)){return(7.5625*b*b)}else{if(b<(2/2.75)){return(7.5625*(b-=(1.5/2.75))*b+0.75)}else{if(b<(2.5/2.75)){return(7.5625*(b-=(2.25/2.75))*b+0.9375)}else{return(7.5625*(b-=(2.625/2.75))*b+0.984375)}}}}return{bounce:a}})();var Component=(function(){var b=function(f,d){if(typeof f=="function"){for(var e in d){f.prototype[e]=d[e]}}else{if(typeof f=="object"&&typeof d=="object"){for(var c in d){f[c]=d[c]}}}};function a(e,c){var f=function(){return c._construct.call(this,arguments)};f.prototype=new e();for(var d in c){if(d!="_construct"){f.prototype[d]=c[d]}}return f}return{merge:b,extend:a}})();var _construct=function(a){this.cfg=a||{}};var Form=Component.extend(_construct,{build:function(){this.reference=$.create({type:"div",cls:this.cls,arr:[{type:"form",action:this.action,method:this.method,enctype:(this.multipart?"multipart/form-data":""),id:this.id}]},this.parent);this.body=$.create({type:"fieldset",id:[this.id,"_fieldset"].join("")},$(["#",this.id].join(""))[0])},_construct:function(a){this.cfg=a[0]||{};this.id=(this.cfg.id?this.cfg.id:"");this.method=(this.cfg.method?this.cfg.method:"");this.action=(this.cfg.action?this.cfg.action:"");this.parent=(this.cfg.parent?this.cfg.parent:"");this.cls=(this.cfg.cls?this.cfg.cls:"");this.multipart=(this.cfg.multipart?this.cfg.multipart:false);this.build()}});var FormEl=Component.extend(_construct,{wrapper:function(){this.parent=(this.cfg.parent?this.cfg.parent:"");this.label=(this.cfg.label?this.cfg.label:"");this.id=(this.cfg.id?this.cfg.id:"");this.value=(this.cfg.value?this.cfg.value:"");this.reference=$.create({type:"div",cls:"control-group",arr:[{type:"label","for":[this.id,"_input"].join(""),id:[this.id,"_label"].join(""),cls:"control-label",html:this.label},{type:"div",id:(this.id!==""?[this.id,"_wrap"].join(""):""),cls:"controls"}]},this.parent)},setValue:function(a){this.value=a||"";switch(this.type){case"textarea":$(["#",this.id,"_input"].join("")).html(this.value);break;case"select":if(typeof this.value=="number"){$(["#",this.id,"_input"].join("")).val(this.options[this.value])}else{$(["#",this.id,"_input"].join("")).val(this.value)}break;default:$(["#",this.id,"_input"].join("")).val(this.value);break}},getValue:function(){return(this.value?this.value:null)},setLabel:function(a){this.label=a||"";$(["#",this.id,"_label"].join("")).html(this.label)},getLabel:function(){return(this.label?this.label:null)},_construct:function(a){this.cfg=a[0]||{}}});var Text=Component.extend(FormEl,{type:"text",build:function(){var a={type:"input",iType:"text",cls:"input  input-xlarge",id:[this.id,"_input"].join(""),name:[this.id,"_input"].join("")};if(this.disabled){a.disabled="disabled"}$.create(a,$(["#",this.id,"_wrap"].join(""))[0])},setup:function(){var a=this;$(["#",this.id,"_input"].join("")).keyup(function(){a.setValue($(this).val());a.change(a)})},_construct:function(a){this.cfg=a[0]||{};if(this.cfg.id&&this.cfg.parent&&this.cfg.label){this.disabled=(this.cfg.disabled?this.cfg.disabled:false);this.change=(this.cfg.change?this.cfg.change:function(){});this.wrapper();this.build();this.setup();if(this.cfg.value!==""){this.setValue(this.cfg.value)}}}});var Password=Component.extend(FormEl,{type:"password",build:function(){var a={type:"input",iType:"password",cls:"input  input-xlarge",id:[this.id,"_input"].join(""),name:[this.id,"_input"].join("")};if(this.disabled){a.disabled="disabled"}$.create(a,$(["#",this.id,"_wrap"].join(""))[0])},setup:function(){var a=this;$(["#",this.id,"_input"].join("")).keyup(function(){a.setValue($(this).val());a.change(a)})},_construct:function(a){this.cfg=a[0]||{};if(this.cfg.id&&this.cfg.parent&&this.cfg.label){this.change=(this.cfg.change?this.cfg.change:function(){});this.disabled=(this.cfg.disabled?this.cfg.disabled:false);this.wrapper();this.build();this.setup();if(this.cfg.value!==""){this.setValue(this.cfg.value)}}}});var Textarea=Component.extend(FormEl,{type:"textarea",build:function(){$.create({type:"textarea",cls:"input  input-xlarge",id:[this.id,"_input"].join(""),name:[this.id,"_input"].join("")},$(["#",this.id,"_wrap"].join(""))[0])},setup:function(){var a=this;$(["#",this.id,"_input"].join("")).keyup(function(){a.setValue($(this).val());a.change(a)})},_construct:function(a){this.cfg=a[0]||{};if(this.cfg.id&&this.cfg.parent&&this.cfg.label){this.change=(this.cfg.change?this.cfg.change:function(){});this.wrapper();this.build();this.setup();if(this.cfg.value!==""){this.setValue(this.cfg.value)}}}});var Checkbox=Component.extend(FormEl,{type:"checkbox",wrapper:function(){this.parent=(this.cfg.parent?this.cfg.parent:"");this.label=(this.cfg.label?this.cfg.label:"");this.id=(this.cfg.id?this.cfg.id:"");this.value=(this.cfg.value?this.cfg.value:"");this.reference=$.create({type:"div",cls:"control-group",arr:[{type:"div",id:(this.id!==""?[this.id,"_wrap"].join(""):""),cls:"controls",arr:[{type:"label","for":[this.id,"_input"].join(""),id:[this.id,"_label"].join(""),cls:"checkbox",html:this.label}]}]},this.parent)},build:function(){var a={type:"input",iType:"checkbox",cls:"input  input-xlarge",id:[this.id,"_input"].join(""),name:[this.id,"_input"].join(""),value:this.value};if(this.disabled){a.disabled="disabled"}this.body=$.create(a,$(["#",this.id,"_label"].join(""))[0])},check:function(){$(["#",this.id,"_input"].join("")).attr("checked","checked")},isChecked:function(){return $(["#",this.id,"_input"].join("")).is(":checked")},setLabel:function(a){this.label=a||"";$(["#",this.id,"_label"].join("")).html(this.label);this.build();this.setup()},getLabel:function(){return(this.label?this.label:null)},setup:function(){var a=this;$(["#",this.id,"_input"].join("")).click(function(){a.change(a)})},_construct:function(a){this.cfg=a[0]||{};this.change=(this.cfg.change?this.cfg.change:function(){});if(this.cfg.id&&this.cfg.parent&&this.cfg.label){this.disabled=(this.cfg.disabled?this.cfg.disabled:false);this.wrapper();this.build();this.setup();if(this.cfg.checked){this.check()}}}});var Select=Component.extend(FormEl,{type:"select",build:function(){var a={type:"select",cls:"input  input-xlarge",id:[this.id,"_input"].join(""),name:[this.id,"_input"].join("")};if(this.disabled){a.disabled="disabled"}this.body=$.create(a,$(["#",this.id,"_wrap"].join(""))[0])},setOptions:function(){var b=this.options,d="";for(var c=0,a=b.length;c<a;++c){d=b[c];$.create({type:"option",value:d,html:d},$(["#",this.id,"_input"].join(""))[0])}},addOption:function(a){this.options.push(a);this.removeOptions();this.setOptions()},addOptions:function(a){this.options=$.arrayUnique(a);this.removeOptions();this.setOptions()},deleteOption:function(c){var a,b=this;if(typeof c=="number"){c=this.options[c]}$(["#",this.id,"_input > option"].join("")).each(function(){if($(this).val()==c){$(this).remove();b.options.splice(a,1)}a++})},removeOptions:function(){$(["#",this.id,"_input > option"].join("")).each(function(){$(this).remove()})},setup:function(){var a=this;$(this.body).change(function(){a.setValue($(this).val());a.change(a)})},_construct:function(a){this.cfg=a[0]||{};this.selected=(this.cfg.selected?this.cfg.selected:this.options[0]);this.change=(this.cfg.change?this.cfg.change:function(){});this.disabled=(this.cfg.disabled?this.cfg.disabled:false);if(this.cfg.id&&this.cfg.parent&&this.cfg.label){this.wrapper();this.build();this.options=(this.cfg.options?this.cfg.options:[]);this.setOptions()}if(this.selected){this.setValue(this.selected)}this.setup()}});var Button=Component.extend(FormEl,{type:"button",wrapper:function(){this.parent=(this.cfg.parent?this.cfg.parent:"");this.label=(this.cfg.label?this.cfg.label:"");this.id=(this.cfg.id?this.cfg.id:"");this.reference=$.create({type:"div",cls:"control-group",arr:[{type:"div",id:(this.id!==""?[this.id,"_wrap"].join(""):""),cls:"controls"}]},this.parent)},build:function(){var a={type:(this.href&&this.href!=""?"a":"button"),cls:this.cls,id:[this.id,"_input"].join(""),name:[this.id,"_input"].join(""),html:this.label};if(this.target!=""){a.target=this.target}if(this.href&&this.href!=""){a.href=this.href}this.body=$.create(a,$(["#",this.id,"_wrap"].join(""))[0])},setUp:function(){var a=this;$(this.body).click(function(){alert("clicked");a.pressed(a);return false})},_construct:function(a){this.cfg=a[0]||{};this.pressed=(this.cfg.pressed?this.cfg.pressed:function(){});this.href=(this.cfg.href?this.cfg.href:"");this.cls=(this.cfg.cls?this.cfg.cls:"");this.label=(this.cfg.label?this.cfg.label:"");this.target=(this.cfg.target?this.cfg.target:"");this.wrapper();this.build();this.setUp()}});var MultipleNumber=Component.extend(FormEl,{type:"custominput",getValue:function(){var b="";for(var a in this.value){b+=" "+this.value[a]}return b.substring(1,b.length-1)},setValue:function(a,b){var a=a||"",b=b||"";if(a!=""&&b!=""){if(this.value[a]){this.value[a]=b;$(["#",a].join("")).val(b)}}},build:function(){var g={},h={},f={},e={};this.value={};for(var d=0,c=this.elements.length;d<c;d++){g=this.elements[d];h={};switch(g.type){case"text":h={type:"input",iType:"text",cls:["input input-xlarge pull-left multiple ",(g.len?g.len:"")," ",this.id].join(""),id:[this.id,"_input_",d].join(""),value:(g.value?g.value:""),name:[this.id,"_input_",d].join("")};if(g.disabled){h.disabled="disabled"}$.create(h,$(["#",this.id,"_wrap"].join(""))[0]);this.value[[this.id,"_input_",d].join("")]=(g.value?g.value:"");break;case"select":$.create({type:"select",cls:["input input-xlarge pull-left multiple ",(g.len?g.len:"")," ",this.id].join(""),id:[this.id,"_input_",d].join(""),name:[this.id,"_input_",d].join("")},$(["#",this.id,"_wrap"].join(""))[0]);for(var b=0,a=g.options.length;b<a;b++){f=g.options[b];e={type:"option",value:f,html:f};if(b==g.selected){e.selected="selected"}$.create(e,$(["#",this.id,"_input_",d].join(""))[0])}this.value[[this.id,"_input_",d].join("")]=(g.selected?g.options[g.selected]:g.options[0]);break}}},setUp:function(){var a=this;$([".",this.id].join("")).change(function(){a.setValue($(this).attr("id"),$(this).val());a.change(a)})},_construct:function(a){this.cfg=a[0]||{};this.id=(this.cfg.id?this.cfg.id:"");this.label=(this.cfg.label?this.cfg.label:"");this.change=(this.cfg.change?this.cfg.change:function(){});this.elements=(this.cfg.elements?this.cfg.elements:[]);this.value={};this.wrapper();this.build();this.setUp()}});var Radio=Component.extend(FormEl,{type:"radio",wrapper:function(){this.parent=(this.cfg.parent?this.cfg.parent:"");this.label=(this.cfg.label?this.cfg.label:"");this.id=(this.cfg.id?this.cfg.id:"");this.value=(this.cfg.value?this.cfg.value:"");this.listener_class=[this.id,"_r_listener"].join("");this.reference=$.create({type:"div",cls:"control-group",id:(this.id!==""?[this.id,"_wrap"].join(""):""),arr:[{type:"label",id:[this.id,"_radio_label"].join(""),cls:"control-label",html:this.label},{type:"div",cls:"controls",id:[this.id,"_radio_wrapper"].join("")}]},this.parent)},build:function(){var b=this.options,d="";for(var c=0,a=b.length;c<a;++c){d=b[c];$.create({type:"label",id:[c,"_radio_label_",this.id].join(""),"for":[c,"_input_",this.id].join(""),cls:"radio",html:d},$(["#",this.id,"_radio_wrapper"].join(""))[0]);$.create({type:"input",iType:"radio",cls:["input  input-xlarge ",this.listener_class].join(""),id:[c,"_input_",this.id].join(""),name:[this.id,"_name"].join(""),value:d},$(["#",c,"_radio_label_",this.id].join(""))[0])}},setValue:function(a){var b="";if(typeof a=="number"){b=this.options[a]}else{b=a}$([".",this.listener_class].join("")).each(function(){if($(this).val()==b){$(this).attr("checked","checked")}});this.value=b},addOption:function(a){this.removeOptions();this.options.push(a);this.build();this.setUp()},addOptions:function(a){this.options=$.arrayUnique(a);if(this.options.length===0){this.removeOptions()}else{this.removeOptions();this.build();this.setUp()}},removeOptions:function(){$(["#",this.id,"_radio_wrapper > label"].join("")).each(function(){$(this).children().unbind();$(this).remove()})},deleteOption:function(c){var a,b=this;if(typeof c=="number"){c=this.options[c]}$(["#",this.id,"_radio_wrapper > label"].join("")).each(function(){if($(this).children().val()==c){$(this).children().unbind();$(this).remove();b.options.splice(a,1)}a++})},setUp:function(){var a=this;$([".",this.listener_class].join("")).click(function(){a.setValue($(this).val());a.change(a)})},_construct:function(a){this.cfg=a[0]||{};this.change=(this.cfg.change?this.cfg.change:function(){});this.options=(this.cfg.options?this.cfg.options:[]);this.selected=(this.cfg.selected?this.cfg.selected:this.options[0]);if(this.cfg.id&&this.cfg.parent&&this.cfg.label){this.wrapper();this.build();this.setUp()}if(this.selected){this.setValue(this.selected)}}});var RadioMatrix=Component.extend(FormEl,{type:"radiomatrix",getValue:function(){var j=this,k="",b="",e="",a={};for(var f=0,d=this.rows.length;f<d;++f){k=this.rows[f];a[k]="";for(var h=0,g=this.columns.length;h<g;++h){b=this.columns[h];e=["#",f,"_input_",j.id,"_",h].join("");if($(e).is(":checked")){a[k]=b}}}this.values=a;return this.values},addRows:function(a){this.values={};this.rows=$.arrayUnique(a);this.cleanUp();this.build();this.setUp()},addColumns:function(a){this.values={};this.columns=$.arrayUnique(a);this.cleanUp();this.build();this.setUp()},wrapper:function(){this.parent=(this.cfg.parent?this.cfg.parent:"");this.label=(this.cfg.label?this.cfg.label:"");this.id=(this.cfg.id?this.cfg.id:"");this.value=(this.cfg.value?this.cfg.value:"");this.reference=$.create({type:"div",cls:"control-group",id:[this.id,"_group"].join("")},this.parent)},build:function(){$.create({type:"table",cls:this.cls,id:[this.id,"_table"].join("")},$(["#",this.id,"_group"].join(""))[0]);var c="";$.create({type:"tr",id:["tr_head"].join(""),arr:this.getTableHead()},$(["#",this.id,"_table"].join(""))[0]);for(var b=0,a=this.rows.length;b<a;++b){c=this.rows[b];$.create({type:"tr",id:["tr_",b].join(""),arr:this.buildRow(b,c)},$(["#",this.id,"_table"].join(""))[0])}},getTableHead:function(){var d="",b=[];b.push({type:"td",id:["td_head_",c].join(""),cls:"td_label",html:""});for(var c=0,a=this.columns.length;c<a;++c){d=this.columns[c];b.push({type:"td",id:["td_head_",c].join(""),arr:[{type:"span",cls:"head_label",html:d}]})}return b},buildRow:function(c,f){var e="",b=[];b.push({type:"td",id:["td_",c,"_label"].join(""),cls:"td_label",arr:[{type:"label",cls:"control-label",html:f}]});for(var d=0,a=this.columns.length;d<a;++d){e=this.columns[d];b.push({type:"td",cls:"cell",id:["td_",c,"_",d].join(""),arr:[{type:"input",iType:"radio",rel:[c,"|",d].join(""),id:[c,"_input_",this.id,"_",d].join(""),cls:["input input-xlarge ",this.id,"_r_listener"].join(""),name:[this.id,"_name_",c].join(""),value:e}]})}return b},cleanUp:function(){$(["#",this.id,"_table"].join("")).remove()},setUp:function(){var a=this;$([".",this.id,"_r_listener"].join("")).unbind();$([".",this.id,"_r_listener"].join("")).click(function(){a.change(a)})},_construct:function(a){this.cfg=a[0]||{};this.change=(this.cfg.change?this.cfg.change:function(){});this.columns=(this.cfg.columns?this.cfg.columns:[]);this.rows=(this.cfg.rows?this.cfg.rows:[]);this.cls=(this.cfg.cls?this.cfg.cls:"");this.values={};this.wrapper();this.build();this.setUp()}});var Initializer=(function(){var a=function(){if(typeof b=="undefined"){var b={log:function(){}}}var c={};if(typeof DomBuilder!=="undefined"){c.create=DomBuilder.create;c.getParent=DomBuilder.getParent}if(typeof Stuff!=="undefined"){c.arrayUnique=Stuff.arrayUnique}$.extend(c)};if(typeof $=="undefined"||typeof jQuery=="undefined"){alert("jquery is missing")}else{if(typeof emile=="undefined"){alert("emile is missing")}else{$(document).ready(a)}}})();